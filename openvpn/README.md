1.сертификаты должны находится внутри переменных. делать все эти шаги с загрузкой временных файлов и чтением оттуда не надо
completed


2.Все файлы, генерируемые с помощью ansible должны содержать {{ansible_managed}}
completed


3.Темплейты/файлы в роли нужно располагать в той же структуре директорий, в которой они будут на сервере назначения, и с именем имя_оригинального_файла.j2 , т.е. темплейт файла /tmp/test.txt должен оказаться в templates/tmp/test.txt.j2 .
completed

4.Переменные должны быть отсортированы в алфавитном порядке.
completed

5.Переменные должны именоваться имяроли_имяпеременной. Имя переменной должно отражать ее назначение.
completed

6.Все переменные должны быть описаны в README.MD иметь значения по умолчанию:

  - Переменные предназначенные для пользователя и могут быть изменены через playbook должны размещаться в  defaults/main.yml.
  - Внутренние переменные роли в vars/main.yml.

Обратите внимание, что переменные находящиеся в vars/main.yml не могут быть изменены из playbook.

7.Таски роли лучше разделять по их логике в разные файлы, например, управление конфигурацией config.yml и управление пакетами в install.yml, которые уже подключаются в main.yml .
completed

8.Роль должна иметь тэг  с ее именем, также если есть config.yml  и  install.yml, должны стоять тэги config и install соответственно.
completed

9.зачем устанавливается traceroute?
исходя из письма Дианы:
>Что  помещать в переменные нужно выбрать самостоятельно исходя из соображений достаточности и масштабируемости решения.
Я выбрал переменные, исходя из безопасности запустил клиента не от root'а и установил пакет который мог мне понадобиться в работе.
Как вариант можно было добавить шаги проверки доступности хоста и порта OpenVPN сервера и описать работу в firewall, но это потребовало бы больше времени на отладку.



10.Роль должна выполняться пользователем без прав администратора 
completed

11.Лучше фиксировать версию пакета, чтобы избежать неожиданного поведения при установке неожиданно новой версии
completed


12.Записи типа:

```
  template src=tmp/test.txt.j2 dest=/tmp/test.txt
```
рекомендуется выполнять в виде

```
  template src="{{ item }}.j2" dest="/{{ item }}"
  with_items:
    - "tmp/test.txt"
```
Даже если элемент всего один. Это минимизирует вероятность ошибок в src\dest, а так же зачастую упрощает чтение роли.

completed


-------------------------------------
Используемые переменные и значения по-умолчанию:

openvpn_client_dev: tun
openvpn_client_files_dir: ~/ansible/test_work/openvpn/files
openvpn_client_group: openvpn
openvpn_client_user: openvpn
openvpn_server: 8.8.8.8
openvpn_server_port: 2195
openvpn_server_proto: udp
openvpn_service_namedefault: baykalteam